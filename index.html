<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binuangeun Maritime Analysis</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        .recharts-responsive-container { min-height: 300px; }
        table { width: 100%; border-collapse: collapse; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

        // DATA REAL ERA5 45 TAHUN (1980-2024)
        const realData = {
            seasonal: {
                SHC: {1: 1.72, 2: 1.73, 3: 1.70, 4: 1.79, 5: 2.06, 6: 2.27, 7: 2.44, 8: 2.45, 9: 2.32, 10: 2.03, 11: 1.75, 12: 1.66},
                MWP: {1: 9.26, 2: 9.34, 3: 9.93, 4: 10.30, 5: 10.19, 6: 10.30, 7: 9.97, 8: 9.71, 9: 9.63, 10: 9.49, 11: 9.29, 12: 9.39},
                SSRD: {1: 70.13, 2: 71.59, 3: 75.58, 4: 73.38, 5: 70.97, 6: 67.05, 7: 70.86, 8: 79.94, 9: 85.55, 10: 85.11, 11: 75.56, 12: 72.25},
                TP: {1: 0.519, 2: 0.514, 3: 0.386, 4: 0.316, 5: 0.218, 6: 0.190, 7: 0.135, 8: 0.066, 9: 0.099, 10: 0.194, 11: 0.376, 12: 0.445},
                T2: {1: 26.45, 2: 26.57, 3: 26.87, 4: 27.14, 5: 27.36, 6: 26.95, 7: 26.24, 8: 25.76, 9: 25.63, 10: 26.09, 11: 26.44, 12: 26.50},
                WIND: {1: 3.40, 2: 3.64, 3: 1.31, 4: 1.86, 5: 4.83, 6: 5.43, 7: 6.99, 8: 7.83, 9: 7.52, 10: 6.25, 11: 3.84, 12: 1.42}
            },
            hourly: {
                SHC: { 1: {0: 1.72, 3: 1.72, 6: 1.72, 9: 1.72, 12: 1.72, 15: 1.72, 18: 1.72, 21: 1.72}, 2: {0: 1.73, 3: 1.73, 6: 1.73, 9: 1.73, 12: 1.73, 15: 1.73, 18: 1.73, 21: 1.73}, 3: {0: 1.70, 3: 1.70, 6: 1.70, 9: 1.70, 12: 1.70, 15: 1.70, 18: 1.70, 21: 1.70}, 4: {0: 1.79, 3: 1.79, 6: 1.79, 9: 1.79, 12: 1.79, 15: 1.79, 18: 1.79, 21: 1.79}, 5: {0: 2.06, 3: 2.06, 6: 2.06, 9: 2.06, 12: 2.06, 15: 2.06, 18: 2.06, 21: 2.06}, 6: {0: 2.27, 3: 2.27, 6: 2.27, 9: 2.27, 12: 2.27, 15: 2.27, 18: 2.27, 21: 2.27}, 7: {0: 2.44, 3: 2.44, 6: 2.44, 9: 2.44, 12: 2.44, 15: 2.44, 18: 2.44, 21: 2.44}, 8: {0: 2.45, 3: 2.45, 6: 2.45, 9: 2.45, 12: 2.45, 15: 2.45, 18: 2.45, 21: 2.45}, 9: {0: 2.32, 3: 2.32, 6: 2.32, 9: 2.32, 12: 2.32, 15: 2.32, 18: 2.32, 21: 2.32}, 10: {0: 2.03, 3: 2.03, 6: 2.03, 9: 2.03, 12: 2.03, 15: 2.03, 18: 2.03, 21: 2.03}, 11: {0: 1.75, 3: 1.75, 6: 1.75, 9: 1.75, 12: 1.75, 15: 1.75, 18: 1.75, 21: 1.75}, 12: {0: 1.66, 3: 1.66, 6: 1.66, 9: 1.66, 12: 1.66, 15: 1.66, 18: 1.66, 21: 1.66} },
                WIND: { 1: {0: 3.40, 3: 3.40, 6: 3.39, 9: 3.39, 12: 3.41, 15: 3.42, 18: 3.39, 21: 3.40}, 2: {0: 3.64, 3: 3.64, 6: 3.63, 9: 3.64, 12: 3.65, 15: 3.66, 18: 3.63, 21: 3.64}, 3: {0: 1.32, 3: 1.30, 6: 1.32, 9: 1.30, 12: 1.30, 15: 1.30, 18: 1.31, 21: 1.31}, 4: {0: 1.84, 3: 1.86, 6: 1.84, 9: 1.86, 12: 1.87, 15: 1.87, 18: 1.86, 21: 1.87}, 5: {0: 4.84, 3: 4.87, 6: 4.83, 9: 4.83, 12: 4.83, 15: 4.84, 18: 4.81, 21: 4.83}, 6: {0: 5.44, 3: 5.48, 6: 5.41, 9: 5.41, 12: 5.43, 15: 5.44, 18: 5.41, 21: 5.43}, 7: {0: 7.00, 3: 7.04, 6: 6.97, 9: 6.98, 12: 7.00, 15: 7.02, 18: 6.97, 21: 6.98}, 8: {0: 7.85, 3: 7.87, 6: 7.79, 9: 7.81, 12: 7.83, 15: 7.85, 18: 7.81, 21: 7.83}, 9: {0: 7.55, 3: 7.56, 6: 7.48, 9: 7.49, 12: 7.51, 15: 7.52, 18: 7.50, 21: 7.51}, 10: {0: 6.30, 3: 6.31, 6: 6.23, 9: 6.22, 12: 6.22, 15: 6.23, 18: 6.23, 21: 6.26}, 11: {0: 3.89, 3: 3.91, 6: 3.84, 9: 3.82, 12: 3.81, 15: 3.81, 18: 3.81, 21: 3.83}, 12: {0: 1.43, 3: 1.44, 6: 1.44, 9: 1.41, 12: 1.40, 15: 1.39, 18: 1.40, 21: 1.43} },
                SSRD: { 1: {0: 66.08, 3: 65.95, 6: 66.46, 9: 66.69, 12: 70.32, 15: 77.08, 18: 77.57, 21: 70.88}, 2: {0: 67.24, 3: 66.41, 6: 66.76, 9: 67.19, 12: 71.54, 15: 79.12, 18: 80.26, 21: 74.20}, 3: {0: 70.56, 3: 69.43, 6: 69.53, 9: 70.05, 12: 76.59, 15: 84.51, 18: 85.44, 21: 78.52}, 4: {0: 67.70, 3: 66.48, 6: 66.25, 9: 67.26, 12: 76.33, 15: 83.64, 18: 83.33, 21: 76.07}, 5: {0: 64.69, 3: 63.75, 6: 63.67, 9: 65.13, 12: 74.79, 15: 81.50, 18: 81.03, 21: 73.21}, 6: {0: 60.81, 3: 59.44, 6: 59.50, 9: 61.00, 12: 70.73, 15: 77.57, 18: 77.38, 21: 69.94}, 7: {0: 65.08, 3: 63.51, 6: 63.47, 9: 64.12, 12: 73.35, 15: 81.07, 18: 81.58, 21: 74.66}, 8: {0: 73.91, 3: 73.24, 6: 73.04, 9: 73.08, 12: 82.17, 15: 90.26, 18: 90.61, 21: 83.22}, 9: {0: 79.51, 3: 79.60, 6: 79.22, 9: 79.30, 12: 88.82, 15: 96.09, 18: 95.38, 21: 86.50}, 10: {0: 79.48, 3: 79.93, 6: 79.69, 9: 80.45, 12: 89.28, 15: 95.23, 18: 93.33, 21: 83.47}, 11: {0: 70.74, 3: 70.93, 6: 71.14, 9: 72.02, 12: 79.20, 15: 84.42, 18: 82.32, 21: 73.71}, 12: {0: 68.27, 3: 68.39, 6: 68.61, 9: 68.88, 12: 73.76, 15: 79.52, 18: 78.75, 21: 71.80} },
                TP: { 1: {0: 0.520, 3: 0.518, 6: 0.520, 9: 0.513, 12: 0.514, 15: 0.522, 18: 0.521, 21: 0.528}, 2: {0: 0.519, 3: 0.514, 6: 0.513, 9: 0.501, 12: 0.504, 15: 0.516, 18: 0.519, 21: 0.524}, 3: {0: 0.390, 3: 0.386, 6: 0.385, 9: 0.378, 12: 0.378, 15: 0.387, 18: 0.390, 21: 0.394}, 4: {0: 0.328, 3: 0.318, 6: 0.313, 9: 0.307, 12: 0.305, 15: 0.312, 18: 0.319, 21: 0.327}, 5: {0: 0.223, 3: 0.215, 6: 0.213, 9: 0.218, 12: 0.214, 15: 0.217, 18: 0.219, 21: 0.221}, 6: {0: 0.196, 3: 0.185, 6: 0.180, 9: 0.191, 12: 0.189, 15: 0.190, 18: 0.192, 21: 0.199}, 7: {0: 0.139, 3: 0.133, 6: 0.129, 9: 0.135, 12: 0.135, 15: 0.136, 18: 0.136, 21: 0.139}, 8: {0: 0.069, 3: 0.065, 6: 0.062, 9: 0.063, 12: 0.063, 15: 0.065, 18: 0.067, 21: 0.070}, 9: {0: 0.104, 3: 0.098, 6: 0.093, 9: 0.095, 12: 0.096, 15: 0.099, 18: 0.102, 21: 0.107}, 10: {0: 0.201, 3: 0.195, 6: 0.190, 9: 0.187, 12: 0.185, 15: 0.192, 18: 0.198, 21: 0.208}, 11: {0: 0.382, 3: 0.373, 6: 0.368, 9: 0.369, 12: 0.367, 15: 0.377, 18: 0.380, 21: 0.390}, 12: {0: 0.445, 3: 0.439, 6: 0.440, 9: 0.440, 12: 0.443, 15: 0.452, 18: 0.448, 21: 0.454} }
            }
        };

        const MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const HOURS = ['00', '03', '06', '09', '12', '15', '18', '21'];

        const PARAMETERS = {
            SHC: { name: 'Wave Height', unit: 'm', icon: 'waves', color: '#3b82f6' },
            MWP: { name: 'Wave Period', unit: 's', icon: 'activity', color: '#8b5cf6' },
            SSRD: { name: 'Solar Radiation', unit: 'W/mÂ²', icon: 'sun', color: '#f59e0b' },
            TP: { name: 'Precipitation', unit: 'm', icon: 'droplets', color: '#06b6d4' },
            WIND: { name: 'Wind Speed', unit: 'm/s', icon: 'wind', color: '#10b981' },
            T2: { name: 'Temperature', unit: 'Â°C', icon: 'thermometer', color: '#ef4444' }
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('seasonal');
            const [selectedParam, setSelectedParam] = useState('SHC');

            const seasonalChartData = useMemo(() => {
                return MONTHS.map((month, idx) => {
                    const monthNum = idx + 1;
                    return {
                        month,
                        SHC: realData.seasonal.SHC[monthNum],
                        WIND: realData.seasonal.WIND[monthNum],
                        SSRD: realData.seasonal.SSRD[monthNum],
                        TP: realData.seasonal.TP[monthNum] * 1000,
                    };
                });
            }, []);

            const heatmapData = useMemo(() => {
                const data = realData.hourly[selectedParam];
                if (!data) return [];
                return MONTHS.map((month, idx) => {
                    const monthNum = idx + 1;
                    const row = { month };
                    HOURS.forEach(hour => {
                        const hourKey = parseInt(hour);
                        row[hour] = data[monthNum]?.[hourKey] || 0;
                    });
                    return row;
                });
            }, [selectedParam]);

            const getHeatmapColor = (value, param) => {
                if (param === 'SHC') return value < 1.8 ? '#22c55e' : (value < 2.2 ? '#eab308' : '#ef4444');
                if (param === 'WIND') return value < 4 ? '#22c55e' : (value < 6 ? '#eab308' : '#ef4444');
                if (param === 'SSRD') return value < 70 ? '#ef4444' : (value < 80 ? '#eab308' : '#22c55e');
                if (param === 'TP') return value < 0.2 ? '#22c55e' : (value < 0.4 ? '#eab308' : '#ef4444');
                return '#94a3b8';
            };

            return (
                <div className="min-h-screen bg-slate-50">
                    <div className="bg-blue-700 text-white p-8 shadow-lg">
                        <h1 className="text-3xl font-bold">Binuangeun Maritime Climate Analysis</h1>
                        <p className="opacity-90">ERA5 Reanalysis Data (1980-2024) â€¢ 45 Years Analysis</p>
                    </div>

                    <div className="max-w-6xl mx-auto p-6">
                        <div className="flex gap-4 mb-6 border-b">
                            <button onClick={() => setActiveTab('seasonal')} className={`pb-2 px-4 ${activeTab==='seasonal'?'border-b-2 border-blue-600 font-bold':''}`}>Seasonal Cycle</button>
                            <button onClick={() => setActiveTab('heatmap')} className={`pb-2 px-4 ${activeTab==='heatmap'?'border-b-2 border-blue-600 font-bold':''}`}>Operational Heatmap</button>
                        </div>

                        {activeTab === 'seasonal' ? (
                            <div className="bg-white p-6 rounded-xl shadow">
                                <h3 className="text-xl font-bold mb-4">45-Year Monthly Averages</h3>
                                <div className="h-[400px] w-full">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <LineChart data={seasonalChartData}>
                                            <CartesianGrid strokeDasharray="3 3" />
                                            <XAxis dataKey="month" />
                                            <YAxis yAxisId="left" />
                                            <YAxis yAxisId="right" orientation="right" />
                                            <Tooltip />
                                            <Legend />
                                            <Line yAxisId="left" type="monotone" dataKey="SHC" stroke="#3b82f6" name="Wave (m)" strokeWidth={3} />
                                            <Line yAxisId="left" type="monotone" dataKey="WIND" stroke="#10b981" name="Wind (m/s)" />
                                            <Line yAxisId="right" type="monotone" dataKey="SSRD" stroke="#f59e0b" name="Solar (W/mÂ²)" />
                                        </LineChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>
                        ) : (
                            <div className="space-y-6">
                                <div className="flex gap-2 flex-wrap">
                                    {['SHC', 'WIND', 'SSRD', 'TP'].map(p => (
                                        <button key={p} onClick={()=>setSelectedParam(p)} className={`px-4 py-2 rounded-lg border ${selectedParam===p?'bg-blue-600 text-white':'bg-white'}`}>
                                            {PARAMETERS[p].name}
                                        </button>
                                    ))}
                                </div>
                                <div className="bg-white p-6 rounded-xl shadow overflow-x-auto">
                                    <table className="min-w-full text-sm">
                                        <thead>
                                            <tr>
                                                <th className="p-2 border">Month</th>
                                                {HOURS.map(h => <th key={h} className="p-2 border">{h}:00</th>)}
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {heatmapData.map((row, i) => (
                                                <tr key={i}>
                                                    <td className="p-2 border font-bold bg-slate-50">{row.month}</td>
                                                    {HOURS.map(h => (
                                                        <td key={h} className="p-2 border text-center text-white font-bold" style={{backgroundColor: getHeatmapColor(row[h], selectedParam)}}>
                                                            {row[h].toFixed(2)}
                                                        </td>
                                                    ))}
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                        
                        <div className="mt-8 bg-blue-50 p-6 rounded-xl border border-blue-200">
                             <h4 className="font-bold text-blue-800 mb-2">ðŸ“Š Climate Summary:</h4>
                             <ul className="list-disc ml-5 text-blue-900 space-y-1">
                                <li><strong>Safest Period:</strong> Dec-Mar with lowest wave height (1.7m).</li>
                                <li><strong>Strongest Winds:</strong> Aug-Sep during East Monsoon (7.5 - 7.8 m/s).</li>
                                <li><strong>Optimal Drying:</strong> Sep-Oct with highest solar radiation (85+ W/mÂ²).</li>
                             </ul>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
